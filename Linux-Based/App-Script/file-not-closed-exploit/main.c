#include <stdio.h>
#include <fcntl.h>
#include <unistd.h>

int main () {
    int file_descriptor;
    file_descriptor = open("./secret", 0);

    printf("PID of this process is : %d\n", getpid());

    setuid(getuid()); // drop privileges

    char *args[] = {"bash", 0};
    execvp("/bin/sh", args);
    return 0;
}

//gcc -o vuln main.c && chmod u+s vuln