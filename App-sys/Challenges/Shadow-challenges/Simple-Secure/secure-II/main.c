#include <stdio.h>
#include <stdlib.h>
#include <unistd.h>
#include <string.h>
#include <sys/types.h>

#define BUFSIZE 10
#define OVERSIZE 5 //Number of characters that `buf1` with overflow `buf2`

void normalfunc(int a)
{
	printf("Nothing special happened\n");
}
void won(int a)
{
	printf("You won !\n");
}

int main() {
	unsigned long diff;
	void (*normalfunc_ptr)(int);
    normalfunc_ptr = &normalfunc; 
	char buf1[BUFSIZE];
	
	/*
		Will dynamicly allocate `buf1` and `buf` in 
		the heap with the size `BUFSIZE`
	*/

	printf("buf2 before heap overflow = %d\n", &normalfunc_ptr); //Print the buffer
	
	printf("Diff : %d, Oversize : %d, Sum : %d\n", diff, OVERSIZE, diff+OVERSIZE);
	
	printf("Won address : %d : %c\n", &won, &won);
	
	printf("Enter the password : ");
	scanf("%s", )
	
	printf("\n");
	printf("Enter the variable : ");
	
	scanf("%d", &buf1[BUFSIZE]);
	//buf1[BUFSIZE] = &won; 
	
	
	(*normalfunc_ptr)(50);
	
	printf("buf2 after heap overflow = %d\n", &normalfunc_ptr);
	
	free(normalfunc_ptr);
	
	/*
		Free the buffers
	*/
	
	return 0;
}
