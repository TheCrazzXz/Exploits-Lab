
In this article i won't explain what is the heap, but i'll give some resources so then you can understand
# Resources
Chunks and frees (ESSENTIAL) :
Liveoverflow :
https://www.youtube.com/watch?v=HPDBOhiKaD8  
https://www.youtube.com/watch?v=TfJrU95q1J4
# Fast bins
Source  : https://guyinatuxedo.github.io/25-heap/index.html (i want to go deeper in details)
## Binning
So when malloc frees a chunk,  
it will typically insert it into one of the **bin lists** (assuming it can't do something like consolidate it with the top chunk).   
then with a later allocation, it will check the **bins** to see if there are any **freed chunks** that it could allocate to serve the request.  
The purpose of this is so it can **reuse** previous **freed chunks**, for performance improvements.  
**Taken From Nightmare website**

Now from these bins, there are many types of them, depending on the size of the freed data  
First there are **fast bins**, a fast bin is a **linked list**  
But what is a linked list ?  
A linked list is a list where every element points to the next one until the end of the list (the last one points to 0, it significates that it's the end of the list)  
So here, there are 7 fastbins, so 7 linked list, but why 7 ? First they are referenced by their index, so the first one is index 0, seond is index 1 and the 7th one is index 6  
So still, why seven ? Well that's because each one is made for a certain range of size for a chunk :
Fastbins[idx=0, size=0x10]
Fastbins[idx=1, size=0x20]
Fastbins[idx=2, size=0x30]
Fastbins[idx=3, size=0x40]
Fastbins[idx=4, size=0x50]
Fastbins[idx=5, size=0x60]
Fastbins[idx=6, size=0x70]
A chunk of size `0x20-0x2f` would fit into idx 0,
a chunk of size `0x30-0x3f` would fit into idx 1, **Taken From Nightmare website**
a chunk of size `0x40-0x4f` would fit into idx 2 and so forth...
For example, if we free a chunk of size '0x39' it will be added to the index 1, since it's size is between `0x30-0x3f`  
Now how does the link works exactly ?  
Let's make a C program to see that :
```c
#include <stdio.h>
#include <string.h>
#include <stdlib.h>

int main(void)
{
    char* ptr1 = malloc(0x20); 
    char* ptr2 = malloc(0x20); 
    char* ptr3 = malloc(0x20); 

    printf("ptr1 -> 0x%x\n", ptr1);
    printf("ptr2 -> 0x%x\n", ptr2);
    printf("ptr3 -> 0x%x\n", ptr3);

    memset(ptr1, 'A', 0x20);
    memset(ptr2, 'B', 0x20);
    memset(ptr3, 'C', 0x20);

    printf("Freeing pointers\n");
    free(ptr3); // Linked list idx 1 => 0x20-0x2f
    free(ptr2); // Linked list idx 1 => 0x20-0x2f
    free(ptr1); // Linked list idx 1 => 0x20-0x2f
}
```
ASLR disabled
