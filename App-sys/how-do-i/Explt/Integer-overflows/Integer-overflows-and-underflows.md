# Exploits
## Integer overflows and underflows
### How numbers are stored in the memory
Integers are just a collection of bytes stored in the memory, a byte is just 8 bits  
A normal integer is 4 bytes, so it can store 4 bytes, an unsigned integer is also 4 bytes, the difference between them is just that the system intepret them in different ways  
So an unsigned integer goes from 0 to 2 power of 32 (4 bytes) which is 4 294 967 295, so this is the max value it can store  
An normal integer goes from -2 147 483 647 to 2 147 483 647, that's why they weight the same size but they can store different values
### Insight of the attack
* What if we try to store a value which is bellow the limit of an unsigned integer, so an integer max value is 4 294 967 295, what if we set it to a number that is just after this limit, so 4 294 967 296 ? It will restart counting the number from 0, so in other terms, it will reset the number, then if we set it to  4 294 967 297, it will set it to 1 and so forth... This is what is called an integer overflow    
* For integer values, we have two attacks, the integer overflow and the integer underflow  
So to overflow an integer, we can set it to tthe number that is just below the limit so 2 147 483 648, and, will it set it to 0 ? No, it will set it to the minimum value of the number, which, for normal integers is not 0 but -2 147 483 647, then we can add one to the number which overflows to get -2 147 483 646 and so forth...
To underflow an integer, we will set it to the the number to the second one that is just under the minimum value of this one, so if we set it to -2 147 483 649, it will set the number to the maximum value of the number, so 2 147 483 647
### Exploitation
This can be exploited on the system, like with this code :
* For unsigned integer overflows
```c
#include <stdio.h>
int main(void)
{
  unsigned int value = 0;
  printf("Value : %u\n", value);
  value = 4294967295;
  printf("Value : %u\n", value);
  value += 1;
  printf("Value : %u\n", value);
}
```
Which gives us :
```
Value : 0
Value : 4294967295
Value : 0
```
For the user input, we could have used :
```c
#include <stdio.h>
int main(void)
{
	unsigned int value = 0;
	scanf("%u", &value);
	printf("Value : %u\n", value);
}
```
So if we enter :
```
4294967296
```
It will give us 
```
Value : 0
```
* For integer overflows :
```c
#include <stdio.h>
int main(void)
{
  int value = 0;
  printf("Value : %d\n", value);
  value = 2147483647;
  printf("Value : %d\n", value);
  value += 1;
  printf("Value : %d\n", value);
}
```
* And for integer underflows :
```c
#include <stdio.h>
int main(void)
{
  int value = 0;
  printf("Value : %d\n", value);
  value = -2147483647;
  printf("Value : %d\n", value);
  value -= 2;
  printf("Value : %d\n", value);
}
```
Gives :
```
Value : 0
Value : -2147483647
Value : 2147483647
```
